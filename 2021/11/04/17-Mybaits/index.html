<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1 概念Mybatis：又名ibatis    支持定制化SQL、存储过程以及高级映射的    由Apache组织维护的开源的持久层框架简单认知：替代jdbc">
<meta property="og:type" content="article">
<meta property="og:title" content="17-Mybatis笔记">
<meta property="og:url" content="http://example.com/2021/11/04/17-Mybaits/index.html">
<meta property="og:site_name" content="月曜日的丰满">
<meta property="og:description" content="1 概念Mybatis：又名ibatis    支持定制化SQL、存储过程以及高级映射的    由Apache组织维护的开源的持久层框架简单认知：替代jdbc">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-11-04T12:00:00.000Z">
<meta property="article:modified_time" content="2021-11-04T12:12:36.644Z">
<meta property="article:author" content="方方">
<meta property="article:tag" content="mybatis">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2021/11/04/17-Mybaits/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>17-Mybatis笔记 | 月曜日的丰满</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">月曜日的丰满</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/04/17-Mybaits/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="方方">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="月曜日的丰满">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          17-Mybatis笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-04 20:00:00 / 修改时间：20:12:36" itemprop="dateCreated datePublished" datetime="2021-11-04T20:00:00+08:00">2021-11-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-概念"><a href="#1-概念" class="headerlink" title="1 概念"></a>1 概念</h1><p>Mybatis：又名ibatis<br>    支持定制化SQL、存储过程以及高级映射的<br>    由Apache组织维护的开源的持久层框架<br>简单认知：替代jdbc</p>
<span id="more"></span>

<h2 id="jdbc的缺点"><a href="#jdbc的缺点" class="headerlink" title="jdbc的缺点"></a>jdbc的缺点</h2><ol>
<li>频繁地创建和销毁连接：数据库服务器压力大</li>
<li>java代码和sql代码混合在一起：学习成本高 可读性差 维护麻烦</li>
<li>给站位符赋值时：麻烦易错</li>
<li>处理结果集时：麻烦易错</li>
</ol>
<h2 id="mybaits解决jdbc的缺点"><a href="#mybaits解决jdbc的缺点" class="headerlink" title="mybaits解决jdbc的缺点"></a>mybaits解决jdbc的缺点</h2><ol>
<li>mybatis自带连接池，对连接的创建、初始化、分配、维护、销毁进行管理</li>
<li>mybatis是面向配置的编程：把sql语句从java代码中分离，sql映射文件</li>
<li>mybatis可以实现java对象与表记录的自动映射，<pre><code>java对象的属性可以自动sql语句中的对应占位符赋值
</code></pre>
</li>
<li>mybatis可以实现表记录与java对象的自动映射，<pre><code>可以实现数据行的数据自动解析为java对象
</code></pre>
</li>
</ol>
<h2 id="mybatis的特点"><a href="#mybatis的特点" class="headerlink" title="mybatis的特点"></a>mybatis的特点</h2><ol>
<li><p>轻量级</p>
</li>
<li><p>支持动态sql：通过标签实现sql的拼接</p>
</li>
<li><p>面向配置的编程：核心配置文件(mybatis的基本设置)</p>
<p>​    sql映射文件(同一个表的所有sql标签)</p>
</li>
<li><p>sql语句与Java代码的完全分离：单独的文件：sql映射文件存储所有的sql语句</p>
</li>
<li><p>良好支持复杂的数据映射：支持原生态的sql 比较适用于功能多变 模块不确定的项目</p>
</li>
<li><p>简单易学 容易上手</p>
</li>
</ol>
<h2 id="mybatis和hibernate的区别"><a href="#mybatis和hibernate的区别" class="headerlink" title="mybatis和hibernate的区别"></a>mybatis和hibernate的区别</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">都是持久层框架：代替jdbc 核心都是ORM</span><br><span class="line">1 mybatis简单易学 学习成本低</span><br><span class="line">	hibernate比较复杂 学习成本高</span><br><span class="line">2 hibernate是完全的orm框架：不存在sql 对jdbc进行了完全的封装</span><br><span class="line">	mybatis不是完全的额orm框架，需要手写sql</span><br><span class="line">3 hibernate比较适用于传统的 表结构固定的项目</span><br><span class="line">	mybatis比较适用于功能模块多变 表结构复杂的项目</span><br></pre></td></tr></table></figure>



<h1 id="2-Mybatis基础"><a href="#2-Mybatis基础" class="headerlink" title="2 Mybatis基础"></a>2 Mybatis基础</h1><h2 id="2-1-导入jar包"><a href="#2-1-导入jar包" class="headerlink" title="2.1 导入jar包"></a>2.1 导入jar包</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">commons-loggin-1.1.1.jar</span><br><span class="line">log4j-1.2.17.jar</span><br><span class="line">mybatis-3.2.8.jar</span><br><span class="line">mysql-connector-java-5.1.15-bin.jar</span><br></pre></td></tr></table></figure>

<h2 id="2-2-根据表创建实体类"><a href="#2-2-根据表创建实体类" class="headerlink" title="2.2 根据表创建实体类"></a>2.2 根据表创建实体类</h2><blockquote>
<p>注意：表的列名应当和类中的属性名一一对应</p>
</blockquote>
<h2 id="2-3-创建mybatis的核心配置文件"><a href="#2-3-创建mybatis的核心配置文件" class="headerlink" title="2.3 创建mybatis的核心配置文件"></a>2.3 创建mybatis的核心配置文件</h2><ul>
<li>mybatis_conf.xml(基础版本)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>dtd/xsd*</p>
<blockquote>
<p>document type defined : 文档类型定义</p>
<pre><code>给xml文件制定规范：制定xml的根标签+子标签+标签的属性
</code></pre>
</blockquote>
</li>
</ul>
<h3 id="配置文件功能扩展"><a href="#配置文件功能扩展" class="headerlink" title="配置文件功能扩展"></a>配置文件功能扩展</h3><h4 id="1-引入配置文件获取参数"><a href="#1-引入配置文件获取参数" class="headerlink" title="1. 引入配置文件获取参数"></a>1. 引入配置文件获取参数</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入外部的配置文件获取数据库连接所需要的参数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/db.properties&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-指定log4j日志系统"><a href="#2-指定log4j日志系统" class="headerlink" title="2. 指定log4j日志系统"></a>2. 指定log4j日志系统</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定log4j作为日志系统：显示sql语句 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-给实体类起别名"><a href="#3-给实体类起别名" class="headerlink" title="3. 给实体类起别名"></a>3. 给实体类起别名</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 给实体类起别名，在sql的xml映射文件中可以直接使用别名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- 方式1：可以直接给单独的类起别名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;mybatis.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;stu&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 方式2：可以给实体类所在包引入，就可以直接使用包中的类名，不用加包名了 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;mybatis&quot;</span> /&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>完整版</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 注意书写配置标签的顺序， 外部的数据源文件比较靠前， 其次是起别名的配置标签 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 引入外部的配置文件获取数据库连接所需要的参数 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/db.properties&quot;</span> /&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 指定log4j作为日志系统：显示sql语句 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 给实体类起别名，在sql的xml映射文件中可以直接使用别名 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 方式2：可以给实体类所在包引入，就可以直接使用包中的类名，不用加包名了 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;mybatis&quot;</span> /&gt;</span> </span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 方式1：可以直接给单独的类起别名 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;typeAlias type=&quot;mybatis.Student&quot; alias=&quot;stu&quot;/&gt; --&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 在导入了外部配置文件properties之后，可以通过变量的形式获取数据库链接参数 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;datasource&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;datasource&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 配置sql语句的映射xml文件，路径相对src --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mybatis/StudentMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="2-4-创建sql的mapper文件"><a href="#2-4-创建sql的mapper文件" class="headerlink" title="2.4 创建sql的mapper文件"></a>2.4 创建sql的mapper文件</h2><ul>
<li>StudentMapper.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 命名空间用来映射接口，将所有的sql语句映射为接口的方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;/&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;包名.类名&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">      select * from student where sid = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注：mapper不能有空的sql标签语句，否则可能会报错 --&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 每一种sql语句对应一种标签	</span></span><br><span class="line"><span class="comment">	mybatis的sql配置文件中：#&#123;xxx&#125;是占位符</span></span><br><span class="line"><span class="comment">	通用属性：</span></span><br><span class="line"><span class="comment">		id:	用来调用该标签语句的别名 标签的id属性必须唯一</span></span><br><span class="line"><span class="comment"> 		parameterType:	参数的类型(list和单个对象相同)</span></span><br><span class="line"><span class="comment">	注：当parameterType是单值类型时：#&#123;&#125;占位符中的名字 可以随意</span></span><br><span class="line"><span class="comment">		当parameterType是对象类型时：占位符中的名字必须和对象的属性名一致</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	select标签的属性：</span></span><br><span class="line"><span class="comment">        resultType：结果集中&quot;每行&quot;对应的java对象的类型</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-1-多个参数传递问题"><a href="#2-4-1-多个参数传递问题" class="headerlink" title="2.4.1 多个参数传递问题"></a>2.4.1 多个参数传递问题</h3><ul>
<li>方案1：将数据封装为一个对象</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">   Object obj = new Objec(参数1,参数2,...);</span></span><br><span class="line"><span class="comment">      dao.getOne(obj);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne&quot;</span> <span class="attr">restultType</span>=<span class="string">&quot;&quot;</span> <span class="attr">paramType</span>=<span class="string">&quot;Object&quot;</span>&gt;</span></span><br><span class="line">    select * from table where #&#123;obj.参数1&#125; and #&#123;obj.参数2&#125; ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>方案2：将数据封装为一个集合</p>
<ul>
<li><p>List封装：#{list[下标] (.属性名) }</p>
</li>
<li><p>map封装：#{键}</p>
<blockquote>
<p>使用map封装数据，站位符需要和键名一致</p>
</blockquote>
</li>
<li><p>数组封装：#{array[下标] (.属性名)}</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne&quot;</span> <span class="attr">restultType</span>=<span class="string">&quot;&quot;</span> <span class="attr">paramType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    select * from table where #&#123;键值名&#125; and #&#123;键值名&#125; ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>方案3：直接使用索引：从0开始</p>
<ul>
<li>#{0}：对应参数列表的第一个参数</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne&quot;</span> <span class="attr">restultType</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    select * from table where #&#123;0&#125; and #&#123;1&#125; ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>方案4：使用<code>@param(&quot;别名&quot;)</code>注解为参数起别名</p>
<ul>
<li>#{别名}：对应添加注解的参数</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">SqlSessionFactory factory = builder.build(<span class="keyword">new</span> FileInpuStream(<span class="keyword">new</span> File(<span class="string">&quot;path&quot;</span>)));</span><br><span class="line"><span class="keyword">new</span> Dao().getOne(<span class="meta">@param(&quot;别名1&quot;)</span>参数<span class="number">1</span>,<span class="meta">@param(&quot;别名2&quot;)</span>参数<span class="number">2</span>,..);</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne&quot;</span> <span class="attr">restultType</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    select * from table where #&#123;别名1&#125; and #&#123;别名2&#125;,...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-自定义列名、属性映射"><a href="#2-4-2-自定义列名、属性映射" class="headerlink" title="2.4.2 自定义列名、属性映射"></a>2.4.2 自定义列名、属性映射</h3><blockquote>
<p>问题描述：数据表的列名和对象属性名不一致时，无法进行自动映射</p>
</blockquote>
<ul>
<li>解决方案1：在sql语句中为结果集起别名</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 结果集列明与对象属性名不一致：解决方案1：给结果集起别名： --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- List&lt;Student&gt; getAll2(); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAll2&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    select id sid,name sname,score,sex,dy sdy,tid stid,age sage from tab_stu</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解决方案2：定义resultMap指定列名和对象属性的对应关系</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- List&lt;Student&gt; getAll3(); --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;stuMap3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>  <span class="attr">property</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sage&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dy&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sdy&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;boolean&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 本来属性名和列名一致的可以不用设置，顺序也可打乱</span></span><br><span class="line"><span class="comment">        &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt;</span></span><br><span class="line"><span class="comment">          &lt;result column=&quot;score&quot; property=&quot;score&quot;/&gt;</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAll3&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;stuMap3&quot;</span>&gt;</span></span><br><span class="line">    select * from tab_stu</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="2-5-关联sql的mapper文件"><a href="#2-5-关联sql的mapper文件" class="headerlink" title="2.5 关联sql的mapper文件"></a>2.5 关联sql的mapper文件</h2><ul>
<li>mybatis_conf.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入所有的sql映射文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;包名/包名/.../文件名&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 路径相对于src，文件路径之间使用/分割符 --&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="2-6-使用方式"><a href="#2-6-使用方式" class="headerlink" title="2.6 使用方式"></a>2.6 使用方式</h2><h3 id="2-6-1-原始dao方式"><a href="#2-6-1-原始dao方式" class="headerlink" title="2.6.1 原始dao方式"></a>2.6.1 原始dao方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 获取sqlsessionfactorybuilder对象</span></span><br><span class="line">SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line"><span class="comment">// 2 slqsessionfactorybuilder读取核心配置文件 获取sqlsessionfactory对象</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;src/mybatis/mybatis_config.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">SqlSessionFactory factory = builder.build(<span class="keyword">new</span> FileInputStream(file));<span class="comment">// 抛出异常</span></span><br><span class="line"><span class="comment">// 3 获取sqlsession：类似于connection连接</span></span><br><span class="line">SqlSession session = factory.openSession(<span class="keyword">true</span>);<span class="comment">// boolean表示是否支持事物自动提交</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只有dml才有事物：多个dml组成一个整体 同生共死</span></span><br><span class="line"><span class="comment">// 4 通过sqlsession的方法调用sql标签 访问数据库</span></span><br><span class="line">Student s1 = session.selectOne(<span class="string">&quot;getOne&quot;</span>, <span class="number">997</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// session.commit();//事务提交</span></span><br><span class="line"><span class="comment">// 5 关闭session</span></span><br><span class="line">session.close();</span><br></pre></td></tr></table></figure>

<h3 id="2-6-2-mapper代理方式"><a href="#2-6-2-mapper代理方式" class="headerlink" title="2.6.2 mapper代理方式"></a>2.6.2 mapper代理方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//其他步骤与上述无区别</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4 通过sqlsession的方法创建映射接口的代理类</span></span><br><span class="line">StudentMapper studentMapper = session.getMapper(StudentMapper.class);</span><br><span class="line"><span class="comment">// 4.1 调用接口的方法，会执行sql的xml映射文件中的sql语句</span></span><br><span class="line">Student student = studentMapper.getOne(<span class="number">997</span>);</span><br></pre></td></tr></table></figure>



<h1 id="3-Mybatis进阶"><a href="#3-Mybatis进阶" class="headerlink" title="3 Mybatis进阶"></a>3 Mybatis进阶</h1><p>结合Mybatis基础的配置文件功能扩展进行理解</p>
<h2 id="3-1-配置日志系统"><a href="#3-1-配置日志系统" class="headerlink" title="3.1 配置日志系统"></a>3.1 配置日志系统</h2><p>以配置log4h日志文件为例：</p>
<ol>
<li><p>导入jar包：common-logging-1.1.1.jar + log4j-1.2.17.jar</p>
</li>
<li><p>创建一个log4j的核心配置文件：名字必须是log4j.properties (<font color=red>位置必须是src</font>)</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">log4j.logger.com.ibatis=DEBUG</span><br><span class="line">log4j.logger.com.ibatis.common.jdbc.SimpleDataSource=DEBUG</span><br><span class="line">log4j.logger.com.ibatis.common.jdbc.ScriptRunner=DEBUG</span><br><span class="line">log4j.logger.com.ibatis.sqlmap.engine.impl.SqlMapClientDelegate=DEBUG</span><br><span class="line">log4j.logger.Java.sql.Connection=DEBUG</span><br><span class="line">log4j.logger.java.sql.Statement=DEBUG</span><br><span class="line">log4j.logger.java.sql.PreparedStatement=DEBUG</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在mybatis核心配置文件中添加setting标签</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 制定log4j作为日志系统：显示sql语句 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用效果</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">log4j:WARN No appenders could be found for logger (org.apache.ibatis.logging.LogFactory).</span><br><span class="line">log4j:WARN Please initialize the log4j system properly.</span><br><span class="line">log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.</span><br><span class="line">Logging initialized using &#x27;class org.apache.ibatis.logging.stdout.StdOutImpl&#x27; adapter.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">PooledDataSource forcefully closed/removed all connections.</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 214074868.</span><br><span class="line">==&gt;  Preparing: select * from student where sid = ? </span><br><span class="line">==&gt; Parameters: 997(Integer)</span><br><span class="line">&lt;==    Columns: sid, sname, sex, score, stid, sage, sdy</span><br><span class="line">&lt;==        Row: 51, 新xxx, 仙, 111.0, 2, 12, 1</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@cc285f4]</span><br><span class="line">Returned connection 214074868 to pool.</span><br></pre></td></tr></table></figure>

<h2 id="3-2-日志log4j详解"><a href="#3-2-日志log4j详解" class="headerlink" title="3.2 日志log4j详解"></a>3.2 日志log4j详解</h2><ul>
<li>日志系统</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">系统日志是记录系统中硬件、软件和系统问题的信息，同时还可以还可以见识系统中发生的事情，</span><br><span class="line">对用户操作进行统计。。。</span><br><span class="line">分类：服务器日志、用户操作日志、错误日志、数据库日志</span><br></pre></td></tr></table></figure>

<ul>
<li>log4j</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log for java 为java写的一个日志系统</span><br></pre></td></tr></table></figure>

<p>使用步骤：</p>
<ol>
<li><p>导入jar包：log4j-1.2.17.jar</p>
</li>
<li><p>在创建log4j的核心配置文件</p>
<ul>
<li>位置必须是src</li>
<li>名字必须是log4j.properties</li>
</ul>
</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#日志级别</span></span><br><span class="line"><span class="comment">#A：off 最高等级，用于关闭所有日志记录。</span></span><br><span class="line"><span class="comment">#B：fatal 指出每个严重的错误事件将会导致应用程序的退出。</span></span><br><span class="line"><span class="comment">#C：error 指出虽然发生错误事件，但仍然不影响系统的继续运行。</span></span><br><span class="line"><span class="comment">#D：warm 表明会出现潜在的错误情形。</span></span><br><span class="line"><span class="comment">#E：info 一般和在粗粒度级别上，强调应用程序的运行全程。</span></span><br><span class="line"><span class="comment">#F：debug 一般用于细粒度级别上，对调试应用程序非常有帮助。</span></span><br><span class="line"><span class="comment">#G：all 最低等级，用于打开所有日志记录。</span></span><br><span class="line"><span class="comment"># 指定统一的日志级别为INFO</span></span><br><span class="line"><span class="comment"># 指定两个记录官：stdout , R</span></span><br><span class="line"><span class="meta">log4j.rootCategory</span>=<span class="string">INFO, stdout , R</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#记录官stdout：类型是ConsoleAppender--要把信息打印到控制台</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="comment">#记录官stdout：日志信息格式是自定义的</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="comment">#记录官stdout：日志信息格式</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">[QC] %p [%t] %C.%M(%L) | %m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#记录官stdout：类型是DailyRollingFileAppender--每天生成一个新的文件</span></span><br><span class="line"><span class="meta">log4j.appender.R</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.R.File</span>=<span class="string">E:\\log4.log</span></span><br><span class="line"><span class="meta">log4j.appender.R.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.R.layout.ConversionPattern</span>=<span class="string">%d-[TS] %p %t %c - %m%n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.logger.com.neusoft</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.com.opensymphony.oscache</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">log4j.logger.net.sf.navigator</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">log4j.logger.org.apache.commons</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">log4j.logger.org.apache.struts</span>=<span class="string">WARN</span></span><br><span class="line"><span class="meta">log4j.logger.org.displaytag</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">log4j.logger.org.springframework</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.com.ibatis.db</span>=<span class="string">WARN</span></span><br><span class="line"><span class="meta">log4j.logger.org.apache.velocity</span>=<span class="string">FATAL</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.logger.com.canoo.webtest</span>=<span class="string">WARN</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.logger.org.hibernate.ps.PreparedStatementCache</span>=<span class="string">WARN</span></span><br><span class="line"><span class="meta">log4j.logger.org.hibernate</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.org.logicalcobwebs</span>=<span class="string">WARN</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-读取配置文件"><a href="#3-3-读取配置文件" class="headerlink" title="3.3 读取配置文件"></a>3.3 读取配置文件</h2><ul>
<li><p>在java中后缀为<code>.properties</code>的文件为配置文件</p>
<ul>
<li>格式：属性=属性名</li>
<li>作用：作为配置文件，数据之间没有关系；只有单一的名字+值这样类型的数据</li>
</ul>
</li>
<li><p>解析属性集文件</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建properties对象</span></span><br><span class="line">Properties pros = <span class="keyword">new</span> Properties();</span><br><span class="line"><span class="comment">//关联属性集文件</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;src/...&quot;</span>);<span class="comment">//文件路径相对项目</span></span><br><span class="line">pros.load(<span class="keyword">new</span> FileInputStream(file));</span><br><span class="line"><span class="comment">//获取属性值</span></span><br><span class="line">pros.getProperty(<span class="string">&quot;jdbc.driver&quot;</span>);</span><br><span class="line">pros.getProperty(<span class="string">&quot;jdbc.username&quot;</span>);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历：和遍历hashmap相同</span></span><br><span class="line"><span class="comment">//获取素有的键值对应的set 通过键获取值</span></span><br><span class="line">Set&lt;Object&gt; keys = pros.keySet();</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取所有键值对对象对应的set 通过Entry的getKey和getValue获取键和值</span></span><br><span class="line">Set&lt;Entry&lt;Object,Object&gt;&gt; entry = pros.entrySet();</span><br></pre></td></tr></table></figure>



<h2 id="3-4-复杂数据查询"><a href="#3-4-复杂数据查询" class="headerlink" title="3.4 复杂数据查询"></a>3.4 复杂数据查询</h2><p>在对应数据库中的多表联查，将不同的表中的数据拼凑成一个新表，<br>对应java代码中的对象嵌套，将拼凑的新表数据映射到嵌套的对象中，<br>这就是本部分主要讲解的部分</p>
<h3 id="3-4-1-一对一的结果集映射"><a href="#3-4-1-一对一的结果集映射" class="headerlink" title="3.4.1 一对一的结果集映射"></a>3.4.1 一对一的结果集映射</h3><blockquote>
<p>情景说明：涉及到多表查询，两张表的两行数据之间有外键的索引关系，<br>需要通过级联查询获取，两者的数据；在java对象中，表现为对象的属性<br>为引用类型，为其他类型的实体类对象</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    学生成绩类，其中包含了学生的一科成绩信息，</span></span><br><span class="line"><span class="comment">    学号引用学生，课程号引用课程	</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentScore</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer scSid;</span><br><span class="line">	<span class="keyword">private</span> Integer scCid;</span><br><span class="line">	<span class="keyword">private</span> Float scScore;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//外键引用学生的信息</span></span><br><span class="line">	<span class="keyword">private</span> Student student;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer sSid;</span><br><span class="line">	<span class="keyword">private</span> String sName;</span><br><span class="line">	<span class="keyword">private</span> Integer sAge;</span><br><span class="line">	<span class="keyword">private</span> Character sSex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方案1：子查询</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 普通单一查询 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSex&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from student where s_sid = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">&lt;!-- 1对1：使用子查询方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;studentScore&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sc1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scCid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_score&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scScore&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;student&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> 	</span></span><br><span class="line"><span class="tag">                 <span class="attr">select</span>=<span class="string">&quot;mybatis.dao.StudentMapper.getOne&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne1&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;sc1&quot;</span>&gt;</span></span><br><span class="line">    select * from sc where sc_sid=#&#123;0&#125; and sc_cid=#&#123;1&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>方案2：结果集映射resultMap</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1对1：使用resultMap套接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;studentScore&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sc2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scCid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_score&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scScore&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;student&quot;</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">resultMap</span>=<span class="string">&quot;mybatis.dao.StudentMapper.stu&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOne2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;sc2&quot;</span>&gt;</span></span><br><span class="line">    select * from sc,student as s where sc.sc_sid=s.s_sid and sc.sc_sid=#&#123;0&#125; and sc.sc_cid=#&#123;1&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-4-2-一对多的结果集映射"><a href="#3-4-2-一对多的结果集映射" class="headerlink" title="3.4.2 一对多的结果集映射"></a>3.4.2 一对多的结果集映射</h3><blockquote>
<p>情景说明：和多对一的情景相似，但是引用类型为多个对象，是个集合</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer sSid;</span><br><span class="line">	<span class="keyword">private</span> String sName;</span><br><span class="line">	<span class="keyword">private</span> Integer sAge;</span><br><span class="line">	<span class="keyword">private</span> Character sSex;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//学生类中包含该学生的所有成绩列表</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;StudentScore&gt; sc;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentScore</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer scSid;</span><br><span class="line">	<span class="keyword">private</span> Integer scCid;</span><br><span class="line">	<span class="keyword">private</span> Float scScore;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方案1：子查询</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 普通列表查询查询  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;studentScore&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scCid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_score&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scScore&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;sc&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from sc where sc_sid=#&#123;0&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">&lt;!-- 1对n查询：使用子查询的方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;stu1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;sc&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">&quot;mybatis.dao.StudentScoreMapper.getList&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOneAndList1&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;stu1&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from student where s_sid = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>方案2：结果集映射resultMap</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1对n查询：使用resultMap套接连接查询结果 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;stu2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSex&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;sc&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;studentScore&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scSid&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scCid&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_score&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scScore&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOneAndList2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;stu2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from student s,sc where sc.sc_sid=s.s_sid and s.s_sid = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-3-多对多的结果集映射"><a href="#3-4-3-多对多的结果集映射" class="headerlink" title="3.4.3 多对多的结果集映射"></a>3.4.3 多对多的结果集映射</h3><blockquote>
<p>情景说明：和一对多的情景相似，查询结果是个对象集合，且集合中的对象包含了一个集合</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer sSid;</span><br><span class="line">	<span class="keyword">private</span> String sName;</span><br><span class="line">	<span class="keyword">private</span> Integer sAge;</span><br><span class="line">	<span class="keyword">private</span> Character sSex;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//学生类中包含该学生的所有成绩列表</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;StudentScore&gt; sc;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentScore</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Integer scSid;</span><br><span class="line">	<span class="keyword">private</span> Integer scCid;</span><br><span class="line">	<span class="keyword">private</span> Float scScore;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方案1：子查询</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 普通列表查询查询  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;studentScore&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scCid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_score&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scScore&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;sc&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from sc where sc_sid=#&#123;0&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">&lt;!-- n对n查询：使用子查询的方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;stu11&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;sc&quot;</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">&quot;mybatis.dao.StudentScoreMapper.getList&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllAndList1&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;stu11&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from student s,sc where sc.sc_sid=s.s_sid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>方案2：结果集映射resultMap</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- n对n查询：使用resultMap套接连接查询结果 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span> <span class="attr">id</span>=<span class="string">&quot;stu12&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;s_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sAge&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sSex&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 注意使用id标签会对list集合进行去重 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;sc&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;studentScore&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scSid&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scCid&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sc_score&quot;</span> <span class="attr">property</span>=<span class="string">&quot;scScore&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllAndList2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;stu12&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    select * from student s,sc where sc.sc_sid=s.s_sid</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="3-5-使用注解（参考网址）"><a href="#3-5-使用注解（参考网址）" class="headerlink" title="3.5 使用注解（参考网址）"></a>3.5 使用注解（<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/163672002">参考网址</a>）</h2><blockquote>
<p>注意：使用注解时，也是需要指定mapper.xml文件的！！！</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">基本的CRUD头</span><br><span class="line"> @Insert()</span><br><span class="line"> @Delete()</span><br><span class="line"> @Update() </span><br><span class="line"> @Select()</span><br><span class="line"></span><br><span class="line"> @Results    ==&gt; resultMap</span><br><span class="line"> @Result     ==&gt; result</span><br><span class="line"> @One        ==  association</span><br><span class="line"> @Many       ==&gt; collection</span><br></pre></td></tr></table></figure>

<ul>
<li>简单语句</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into user values(#&#123;id&#125;,#&#123;username&#125;)&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Update(&quot;update user set username=#&#123;username&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">selectUser</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>复杂语句</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一对一查询</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from orders&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;id&quot;,column = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;orderTime&quot;,column = &quot;orderTime&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;total&quot;,column = &quot;total&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;user&quot;,column = &quot;uid&quot;,javaType = User.class,</span></span><br><span class="line"><span class="meta">            //这里 的select=&quot;命名空间.方法名称&quot;</span></span><br><span class="line"><span class="meta">            one=@One(select = &quot;com.lagou.mapper.IUserMapper.findById&quot;))</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Order&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一对多查询</span></span><br><span class="line"><span class="comment">//因为这里是一对多的关系,所以这里的javaType的类型为List.class</span></span><br><span class="line"><span class="comment">//然后这里不能使用@one 而是@many，表示这里有多个集合</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;id&quot;,column = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;username&quot;,column = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;orderList&quot;,column = &quot;id&quot;,javaType = List.class,</span></span><br><span class="line"><span class="meta">            //这里 的select=&quot;命名空间.方法名称&quot;</span></span><br><span class="line"><span class="meta">            many = @Many(select = &quot;com.lagou.mapper.IOrderMapper.findOrderByUid&quot;)),</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUser</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多对多</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;id&quot;,column = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;username&quot;,column = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;orderList&quot;,column = &quot;id&quot;,javaType = List.class,</span></span><br><span class="line"><span class="meta">            many = @Many(select = &quot;com.lagou.mapper.IOrderMapper.findOrderByUid&quot;)),</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;id&quot;,column = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;username&quot;,column = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">    @Result(property = &quot;roleList&quot;,column = &quot;id&quot;,javaType = List.class,</span></span><br><span class="line"><span class="meta">            many = @Many(select = &quot;com.lagou.mapper.IRoleMapper.findByUserId&quot;)),</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAllUserAndRoles</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//和一对多不同的是，这里的sql语句是</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from sys_role r,sys_user_role ur where r.id=ur.roleid and ur.userid=#&#123;uid&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Role&gt; <span class="title">findByUserId</span><span class="params">(Integer uid)</span></span>;</span><br></pre></td></tr></table></figure>



<h2 id="3-6-动态sql"><a href="#3-6-动态sql" class="headerlink" title="3.6 动态sql"></a>3.6 动态sql</h2><ul>
<li>if标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">    and sex-#&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍：</span></span><br><span class="line"><span class="comment">	当test中的条件成立时，就将语句拼接在指定位置</span></span><br><span class="line"><span class="comment">注意1：该标签中可以引用参数，</span></span><br><span class="line"><span class="comment">	若参数是对象，直接使用对象属性名</span></span><br><span class="line"><span class="comment">	若是多值参数，可以使用param1的形式，按照参数顺序引用</span></span><br><span class="line"><span class="comment">注意2：外部使用单引号，则内部使用双引号；</span></span><br><span class="line"><span class="comment">	内部使用双引号，则外部使用单引号；</span></span><br><span class="line"><span class="comment">可以使用运算符：和jstl的if标签类似</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>where标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;score != null and score gte 0 and score lte 100&quot;</span>&gt;</span></span><br><span class="line">        score &gt;=#&#123;score&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍：</span></span><br><span class="line"><span class="comment">	动态拼接where关键字，当标签内有sql语句时，添加where</span></span><br><span class="line"><span class="comment">注意：可以去除第一个条件出现的前置and关键字，</span></span><br><span class="line"><span class="comment">		但是不能去除结尾</span></span><br><span class="line"><span class="comment">一般用于select标签内部</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>set标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sname != null&quot;</span>&gt;</span></span><br><span class="line">        sname=#&#123;sname&#125;,</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sdy != null&quot;</span>&gt;</span></span><br><span class="line">        sdy=#&#123;sdy&#125;,</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍：</span></span><br><span class="line"><span class="comment">	可以动态拼接多个赋值语句，并去除掉最后的逗号</span></span><br><span class="line"><span class="comment">注意：只适用于update语句</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>choose标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        sex=#&#123;sex&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;sdy != null&quot;</span>&gt;</span></span><br><span class="line">        sdy=#&#123;sdy&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        stid=1 </span><br><span class="line">    <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍：</span></span><br><span class="line"><span class="comment">	类似java中的switch分支，多条分支只取最先成立的一条</span></span><br><span class="line"><span class="comment">注意：使用时注意条件的先后顺序</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>trim标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">prefixOverrides</span>=<span class="string">&quot;and | or&quot;</span>  </span></span><br><span class="line"><span class="tag">      <span class="attr">suffix</span>=<span class="string">&quot; and 1=1 &quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">        and sex=#&#123;sex&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;score != null&quot;</span>&gt;</span></span><br><span class="line">        or score=#&#123;score&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍：</span></span><br><span class="line"><span class="comment">	用于对整段sql语句的前后端进行处理，修改前后缀</span></span><br><span class="line"><span class="comment">	prefix:整体添加前缀</span></span><br><span class="line"><span class="comment">	suffix：整体添加后缀</span></span><br><span class="line"><span class="comment">	prefixoverrides：去除指定前缀</span></span><br><span class="line"><span class="comment">	suffixoverrides：去除指定后缀</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>foreach标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">index</span>=<span class="string">&quot;i&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> &gt;</span></span><br><span class="line">    #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- foreach标签 : 变量集合</span></span><br><span class="line"><span class="comment">    collection：指定集合的类型：array/list</span></span><br><span class="line"><span class="comment">    item: 定义变量记录集合中的元素</span></span><br><span class="line"><span class="comment">    index：	遍历时元素的下标</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">	separator：每个元素之间的分隔符</span></span><br><span class="line"><span class="comment">    open:	整体前面加的前缀</span></span><br><span class="line"><span class="comment">    close:	整体前面加的后缀</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>bind标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bind</span> <span class="attr">name</span>=<span class="string">&quot;sn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#x27;%&#x27; + _parameter + &#x27;%&#x27;&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍：</span></span><br><span class="line"><span class="comment">	可以在sql标签内部使用，自定义变量</span></span><br><span class="line"><span class="comment">	一般用于对参数变量进行加工处理，比如左右添加%符号</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>sql标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span>sql语句<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 用法介绍:</span></span><br><span class="line"><span class="comment">	一般用于复用sql可以直接用来拼接</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-2-标签中引用参数、参数的属性"><a href="#3-6-2-标签中引用参数、参数的属性" class="headerlink" title="3.6.2 标签中引用参数、参数的属性"></a>3.6.2 标签中引用参数、参数的属性</h3><ol>
<li>参数是对象：通过属性名来获取参数的值</li>
<li>参数是多个单值数据：通过paramx来获取第x个参数的值</li>
<li>参数是一个单值数据：通过_parameter获取此唯一的参数数据</li>
</ol>
<h1 id="4-逆向工程"><a href="#4-逆向工程" class="headerlink" title="4 逆向工程"></a>4 逆向工程</h1><blockquote>
<p>概念：通过程序，由表(关系模型)直接生成实体类(与模型)及其相关代码由实体类自动生成表及其关系</p>
</blockquote>
<h2 id="4-1-使用流程"><a href="#4-1-使用流程" class="headerlink" title="4.1 使用流程"></a>4.1 使用流程</h2><ol>
<li><p>创建项目</p>
<blockquote>
<p>专门有一个项目 用于测试和方向工程，一个项目一般只用一次即可，<br>所以不必加入到项目中。</p>
</blockquote>
</li>
<li><p>导入jar包</p>
<ul>
<li>jdbc</li>
<li>mybatis</li>
<li>log4j</li>
<li>mybatis-generator-core-1.3.2.jar</li>
</ul>
</li>
<li><p>创建逆向工程的配置文件：generatorConfig.xml</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>  </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">generatorConfiguration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span> &gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span>   </span><br><span class="line">    <span class="comment">&lt;!-- 一个数据库一个context --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;infoGuardian&quot;</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 注释 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span> &gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span><span class="comment">&lt;!-- 生成代码的时候是否生成注释，true是取消注释，false会生成注释 --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressDate&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span> <span class="comment">&lt;!-- 是否生成注释代时间戳--&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- jdbc连接 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>  </span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db_11&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span>  </span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;root&quot;</span> /&gt;</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 类型转换 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- 默认为false,可以把数据库中的decimal以及numeric类型解析为Integer，为true时会解析为java.math.BigDecimal） --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 生成实体类地址 --&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zhiyou100.entity&quot;</span>  </span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;.\src&quot;</span> &gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- 是否在当前路径下新加一层schema,</span></span><br><span class="line"><span class="comment">如果为fase路径com.shop.pojo， 为true:com.shop.pojo.[schemaName]  这个情况主要是oracle中有，mysql中没有schema --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- 是否针对string类型的字段在set的时候进行trim调用 --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 生成mapxml文件 --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zhiyou100.mapper&quot;</span>  </span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">&quot;.\src&quot;</span> &gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- 是否在当前路径下新加一层schema,</span></span><br><span class="line"><span class="comment">如果为fase路径com.shop.dao.mapper， 为true:com.shop.dao.mapper.[schemaName]  这个情况主要是oracle中有，mysql中没有schema --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 生成mapxml对应client，也就是接口dao --&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zhiyou100.dao&quot;</span>  </span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">&quot;.\src&quot;</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> &gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- 是否在当前路径下新加一层schema,</span></span><br><span class="line"><span class="comment">如果为fase路径com.shop.dao.mapper， 为true:com.shop.dao.mapper.[schemaName]  这个情况主要是oracle中有，mysql中没有schema --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 配置表信息 --&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">schema</span>=<span class="string">&quot;&quot;</span> <span class="attr">tableName</span>=<span class="string">&quot;student&quot;</span>  </span></span><br><span class="line"><span class="tag">               <span class="attr">domainObjectName</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span>  </span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span>  </span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span>&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- schema即为数据库名 tableName为对应的数据库表, domainObjectName是要生成的实体类的名字， enable*ByExample指的是否生成 对应的example类，Mybatis Generator默认设置会生成一大堆罗哩罗嗦的Example类,主要是用各种不同的条件来操作数据库,大部分是用不到的,用到的时候手工修改mapper和接口文件就行了   --&gt;</span>  </span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 忽略列，不生成bean 字段 --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">ignoreColumn</span> <span class="attr">column</span>=<span class="string">&quot;stid&quot;</span> /&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- 指定列的java数据类型</span></span><br><span class="line"><span class="comment">            &lt;columnOverride column=&quot;LONG_VARCHAR_FIELD&quot; jdbcType=&quot;VARCHAR&quot; /&gt; </span></span><br><span class="line"><span class="comment">              --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<ol start="4">
<li>创建启动类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">    File configFile = <span class="keyword">new</span> File(<span class="string">&quot;src/generatorConfig.xml&quot;</span>); </span><br><span class="line">    ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">    Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">    DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite); </span><br><span class="line">    MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings); </span><br><span class="line">    myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="5-缓存"><a href="#5-缓存" class="headerlink" title="5 缓存"></a>5 缓存</h1><blockquote>
<p>概念：当对数据库进行查询时，如果两次的sql语句一致，不再重复去服务数据库<br>直接使用上一次的查询结果</p>
<p>作用：提高程序效率+降低数据库服务器的压力</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/happyflyingpig/p/7739749.html">参考网址</a></p>
</blockquote>
<h2 id="5-1-一级缓存"><a href="#5-1-一级缓存" class="headerlink" title="5.1 一级缓存"></a>5.1 一级缓存</h2><blockquote>
<p>概念：Mybatis对缓存提供支持，一级缓存默认开启，无法关闭</p>
<p>现象：在参数和SQL完全一样的情况下，使用同一个sqlSession对象调用一个<br>Mapper方法，往往只执行一次SQL，因为使用SqlSession第一次后，Mybatis<br>其会将放在缓存中，以后再查询的时候，如果没有申明需要刷新的情况下，<br>SqlSession都会取出当前缓存的数据，不会再次发送SQL到数据库</p>
</blockquote>
<ul>
<li><p>特点</p>
<ol>
<li>一级缓存默认开启</li>
<li>一级缓存作用范围为同一个sqlSession</li>
<li>一级缓存使用前提：缓存不能刷新</li>
</ol>
</li>
<li><p>一级缓存的生命周期</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、一级缓存的生命周期有多长？</span><br><span class="line"></span><br><span class="line">a、MyBatis在开启一个数据库会话时，会 创建一个新的SqlSession对象，SqlSession对象中会有一个新的Executor对象。Executor对象中持有一个新的PerpetualCache对象；当会话结束时，SqlSession对象及其内部的Executor对象还有PerpetualCache对象也一并释放掉。</span><br><span class="line"></span><br><span class="line">b、如果SqlSession调用了close()方法，会释放掉一级缓存PerpetualCache对象，一级缓存将不可用。</span><br><span class="line"></span><br><span class="line">c、如果SqlSession调用了clearCache()，会清空PerpetualCache对象中的数据，但是该对象仍可使用。</span><br><span class="line"></span><br><span class="line">d、SqlSession中执行了任何一个update操作(update()、delete()、insert()) ，都会清空PerpetualCache对象的数据，但是该对象可以继续使用</span><br></pre></td></tr></table></figure>



<h2 id="5-2-二级缓存"><a href="#5-2-二级缓存" class="headerlink" title="5.2 二级缓存"></a>5.2 二级缓存</h2><blockquote>
<p>二级缓存是appliaction级别的缓存/sqlSessionFactory级别的缓存<br>mybatis的二级缓存是默认关闭的</p>
</blockquote>
<ul>
<li><p>配置二级缓存</p>
<ol>
<li><p>实体类是吸纳序列化接口</p>
<blockquote>
<p>补：二级缓存的数据会存储在硬盘上</p>
</blockquote>
</li>
<li><p>使用缓存的mapper映射文件中添加配置</p>
</li>
</ol>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启本mapper的namespace下的二级缓存--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	eviction:代表的是缓存回收策略，目前MyBatis提供以下策略。</span></span><br><span class="line"><span class="comment">        (1) LRU,最近最少使用的，一处最长时间不用的对象</span></span><br><span class="line"><span class="comment">        (2) FIFO,先进先出，按对象进入缓存的顺序来移除他们</span></span><br><span class="line"><span class="comment">        (3) SOFT,软引用，移除基于垃圾回收器状态和软引用规则的对象</span></span><br><span class="line"><span class="comment">        (4) WEAK,弱引用，更积极的移除基于垃圾收集器状态和弱引用规则的对象。</span></span><br><span class="line"><span class="comment">			这里采用的是LRU，移除最长时间不用的对形象</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	flushInterval:刷新间隔时间，单位为毫秒，这里配置的是100秒刷新，</span></span><br><span class="line"><span class="comment">		如果你不配置它，那么当SQL被执行的时候才会去刷新缓存。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    size:引用数目，一个正整数，代表缓存最多可以存储多少个对象，</span></span><br><span class="line"><span class="comment">		不宜设置过大。设置过大会导致内存溢出。这里配置的是1024个对象</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    readOnly:只读，意味着缓存数据只能读取而不能修改，这样设置的好处</span></span><br><span class="line"><span class="comment">		是我们可以快速读取缓存，缺点是我们没有办法修改缓存，</span></span><br><span class="line"><span class="comment">		他的默认值是false，不允许我们修改</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">eviction</span>=<span class="string">&quot;LRU&quot;</span> <span class="attr">flushInterval</span>=<span class="string">&quot;100000&quot;</span> <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span> <span class="attr">size</span>=<span class="string">&quot;1024&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在使用缓存的mapper映射文件的sql标签中添加配置：(默认是true：可以不用配置)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  List&lt;Student&gt;  getAll1();--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--可以通过设置useCache来规定这个sql是否开启缓存，ture是开启，false是关闭--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAll1&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">useCache</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--可以通过设置useCache来规定这个sql是否开启缓存，ture是开启，false是关闭--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAll2&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">useCache</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在核心配置文件中添加配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">      ....</span><br><span class="line">      <span class="comment">&lt;!--这个配置使全局的映射器(二级缓存)启用或禁用缓存--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="6-模拟mybatis"><a href="#6-模拟mybatis" class="headerlink" title="6 模拟mybatis"></a>6 模拟mybatis</h1><blockquote>
<p>默认原始dao方式</p>
<p>通过sqlsession的selectOne、selectList、delete、insert、update等方法 关联sql标签的id和参数来执行sql语句</p>
</blockquote>
<blockquote>
<p>涉及的技术：xml+反射</p>
</blockquote>
<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><h2 id="web：三层架构"><a href="#web：三层架构" class="headerlink" title="web：三层架构"></a>web：三层架构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">对javaweb项目结构的按业务应用进行划分：</span><br><span class="line">表示层:ui：user interface</span><br><span class="line">      用于显示数据和接收用户输入的数据(jsp+servlet)</span><br><span class="line">业务逻辑层:BLL:Business Logic Layer</span><br><span class="line">      负责关键业务的处理和数据的传递(service)</span><br><span class="line">持久层:DAL:data access layer</span><br><span class="line">      主要负责对数据库的直接访问(dao+entity)</span><br></pre></td></tr></table></figure>

<h2 id="mvc：Model-View-Controller"><a href="#mvc：Model-View-Controller" class="headerlink" title="mvc：Model View Controller"></a>mvc：Model View Controller</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">M是指业务模型model，V是指用户界面view，C则是控制器controller，使用MVC的目的是将M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式(pc+手机+ipad)</span><br><span class="line">model:(实体类+dao+业务)   对数据和功能封装的实体类+业务类+dao类</span><br><span class="line">view:(HTML+CSS+JS+jsp)  页面相关的技术(获取客户的数据+结果数据的展示)</span><br><span class="line">controller:(servlet)    选择页面跳转</span><br><span class="line">mvc是一种通用的软件设计模式</span><br></pre></td></tr></table></figure>

<ul>
<li>优点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 降低耦合度：视图层和业务层分离</span><br><span class="line">2 提高代码的复用性：</span><br><span class="line">3 便于分工开发</span><br><span class="line">4 维护性高</span><br></pre></td></tr></table></figure>

<ul>
<li>缺点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 调试困难（单元测试困难）</span><br><span class="line">2 增加了程序的复杂度</span><br><span class="line">3 不适合中小型项目</span><br></pre></td></tr></table></figure>

<h2 id="orm：对象关系映射"><a href="#orm：对象关系映射" class="headerlink" title="orm：对象关系映射"></a>orm：对象关系映射</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">orm:object relational mapping 对象关系映射</span><br><span class="line">	java中对象的属性与sql表中列的对应关系</span><br><span class="line">解决的问题：给站位符赋值和解析结果集</span><br></pre></td></tr></table></figure>

<h2 id="数据库设计三大范式"><a href="#数据库设计三大范式" class="headerlink" title="数据库设计三大范式"></a>数据库设计三大范式</h2><ul>
<li>数据库设计时 需要遵守的基本规则</li>
</ul>
<h3 id="第一范式1NF：所有列保证列的原子性"><a href="#第一范式1NF：所有列保证列的原子性" class="headerlink" title="第一范式1NF：所有列保证列的原子性"></a>第一范式1NF：所有列保证列的原子性</h3><blockquote>
<p>列数据的不可分割</p>
</blockquote>
<p>内容：避免将一条数据的多段信息编写为一列，否则在使用时仍然需要对列进行拆解，<br>                不符合设计的理念，保证每一列的信息和数据在使用时不被拆开使用</p>
<h3 id="第二范式2NF：消除传递依赖"><a href="#第二范式2NF：消除传递依赖" class="headerlink" title="第二范式2NF：消除传递依赖"></a>第二范式2NF：消除传递依赖</h3><blockquote>
<p>消除传递依赖，一个表只描述一个事物；（就像java设计模式的单一职责原则）</p>
</blockquote>
<p>内容：要求数据库表中的每一列都和注解相关，而不能只与主键的某一部分相关(主要针对联合主键而言)。<font color=red>也就是说在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中</font></p>
<h3 id="第三范式3NF：消除部分依赖"><a href="#第三范式3NF：消除部分依赖" class="headerlink" title="第三范式3NF：消除部分依赖"></a>第三范式3NF：消除部分依赖</h3><blockquote>
<p>消除部分依赖：只针对于 联合主键</p>
</blockquote>
<p>内容：要求数据表中的每一列数据都和主键直接相关，而不能间接相关。<br>                若间接相关则另外建表，用外键引用</p>
<ul>
<li>错误案例:订单详情表</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> order_detail(</span><br><span class="line">       order_id <span class="type">int</span> comment  &quot;订单编号&quot;,</span><br><span class="line">       product_name <span class="type">varchar</span>(<span class="number">11</span>) comment &quot;商品名字&quot;,</span><br><span class="line">       product_number <span class="type">int</span> comment &quot;商品数量&quot;,</span><br><span class="line">       product_price <span class="type">decimal</span> comment &quot;商品单价&quot;,</span><br><span class="line">       discount  <span class="type">float</span> comment &quot;商品折扣&quot;,</span><br><span class="line">       money <span class="type">decimal</span> comment &quot;总金额&quot;,</span><br><span class="line">       <span class="keyword">constraint</span> kf_2 <span class="keyword">foreign</span> key (order_id) <span class="keyword">references</span> <span class="keyword">order</span>(order_id),</span><br><span class="line">       <span class="keyword">primary</span> key(order_id,product_name)</span><br><span class="line">      </span><br><span class="line">);</span><br><span class="line"># product_price和discount 只依赖联合主键的product_name部分：</span><br><span class="line"># 再定义一个商品表</span><br></pre></td></tr></table></figure>

<ul>
<li>正确案例：把部分依赖product_name的信息写道商品表中</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> order_detail(</span><br><span class="line">       order_id <span class="type">int</span> comment  &quot;订单编号&quot;,</span><br><span class="line">       product_id <span class="type">int</span> comment  &quot;商品编号&quot;,</span><br><span class="line">       product_number <span class="type">int</span> comment &quot;商品数量&quot;,</span><br><span class="line">       money <span class="type">decimal</span> comment &quot;总金额&quot;,</span><br><span class="line">       <span class="keyword">constraint</span> kf_21 <span class="keyword">foreign</span> key (order_id) <span class="keyword">references</span> <span class="keyword">order</span>(order_id),</span><br><span class="line">       <span class="keyword">constraint</span> kf_22 <span class="keyword">foreign</span> key (product_id) <span class="keyword">references</span> product(product_id),</span><br><span class="line">       <span class="keyword">primary</span> key(order_id,product_id)  </span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> product(</span><br><span class="line">       product_id <span class="type">int</span> <span class="keyword">primary</span> key comment &quot;商品编号&quot;,</span><br><span class="line">       product_name <span class="type">varchar</span>(<span class="number">11</span>) comment &quot;商品名字&quot;,</span><br><span class="line">       product_price <span class="type">decimal</span> comment &quot;商品单价&quot;,</span><br><span class="line">       discount  <span class="type">float</span> comment &quot;商品折扣&quot;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="lombok"><a href="#lombok" class="headerlink" title="lombok"></a>lombok</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">作用：可以使用简单的注解代替繁琐的生成代码，使代码变的简洁，</span><br><span class="line">		但是可能会降低代码的可读性，以及泛用性，</span><br><span class="line">		因为使用时需要引入响应jar包，和一定的配置</span><br></pre></td></tr></table></figure>

<h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ul>
<li>步骤1：项目中导入jar包</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lombok-1.18.20.jar</span><br></pre></td></tr></table></figure>

<ul>
<li>步骤2：eclipse中安装lombok的插件 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/boonya/p/10691466.html">参考网址</a><ul>
<li>下载lombok.jar</li>
<li>点击jar，选择安装到eclipse的安装目录下</li>
</ul>
</li>
<li>步骤3：重启eclipse</li>
<li>步骤4：使用注解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span>				<span class="comment">// 生成所有属性的getter方法</span></span><br><span class="line"><span class="meta">@Setter</span>				<span class="comment">// 生成所有属性的setter方法</span></span><br><span class="line"><span class="meta">@ToString</span>			<span class="comment">// 重写toString方法</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>	<span class="comment">// 重写equals和hashcode方法</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span>	<span class="comment">// 无参构造方法</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span>	<span class="comment">// 全参构造方法</span></span><br><span class="line"><span class="meta">@Data</span>	</span><br><span class="line"><span class="comment">//等于下面所有注解的结合体</span></span><br><span class="line"><span class="comment">// @ToString @EqualsAndHashCode @Getter @Setter</span></span><br><span class="line"><span class="comment">// @RequiredArgsConstructo</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/mybatis/" rel="tag"># mybatis</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/11/03/01-Java%E7%AC%94%E8%AE%B0/" rel="prev" title="01-Java笔记">
      <i class="fa fa-chevron-left"></i> 01-Java笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/12/02/%E5%9B%9E%E6%BA%AF%E3%80%81%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E3%80%81%E8%B4%AA%E5%BF%83/" rel="next" title="回溯、动态规划、贪心">
      回溯、动态规划、贪心 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E6%A6%82%E5%BF%B5"><span class="nav-text">1 概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jdbc%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="nav-text">jdbc的缺点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mybaits%E8%A7%A3%E5%86%B3jdbc%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="nav-text">mybaits解决jdbc的缺点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mybatis%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-text">mybatis的特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mybatis%E5%92%8Chibernate%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-text">mybatis和hibernate的区别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Mybatis%E5%9F%BA%E7%A1%80"><span class="nav-text">2 Mybatis基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%AF%BC%E5%85%A5jar%E5%8C%85"><span class="nav-text">2.1 导入jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E6%A0%B9%E6%8D%AE%E8%A1%A8%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="nav-text">2.2 根据表创建实体类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E5%88%9B%E5%BB%BAmybatis%E7%9A%84%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">2.3 创建mybatis的核心配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%9F%E8%83%BD%E6%89%A9%E5%B1%95"><span class="nav-text">配置文件功能扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%BC%95%E5%85%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0"><span class="nav-text">1. 引入配置文件获取参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%8C%87%E5%AE%9Alog4j%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F"><span class="nav-text">2. 指定log4j日志系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%BB%99%E5%AE%9E%E4%BD%93%E7%B1%BB%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="nav-text">3. 给实体类起别名</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-%E5%88%9B%E5%BB%BAsql%E7%9A%84mapper%E6%96%87%E4%BB%B6"><span class="nav-text">2.4 创建sql的mapper文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-1-%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E9%97%AE%E9%A2%98"><span class="nav-text">2.4.1 多个参数传递问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%97%E5%90%8D%E3%80%81%E5%B1%9E%E6%80%A7%E6%98%A0%E5%B0%84"><span class="nav-text">2.4.2 自定义列名、属性映射</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-%E5%85%B3%E8%81%94sql%E7%9A%84mapper%E6%96%87%E4%BB%B6"><span class="nav-text">2.5 关联sql的mapper文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="nav-text">2.6 使用方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-1-%E5%8E%9F%E5%A7%8Bdao%E6%96%B9%E5%BC%8F"><span class="nav-text">2.6.1 原始dao方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-2-mapper%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F"><span class="nav-text">2.6.2 mapper代理方式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Mybatis%E8%BF%9B%E9%98%B6"><span class="nav-text">3 Mybatis进阶</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F"><span class="nav-text">3.1 配置日志系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E6%97%A5%E5%BF%97log4j%E8%AF%A6%E8%A7%A3"><span class="nav-text">3.2 日志log4j详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">3.3 读取配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2"><span class="nav-text">3.4 复杂数据查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-%E4%B8%80%E5%AF%B9%E4%B8%80%E7%9A%84%E7%BB%93%E6%9E%9C%E9%9B%86%E6%98%A0%E5%B0%84"><span class="nav-text">3.4.1 一对一的结果集映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2-%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E7%BB%93%E6%9E%9C%E9%9B%86%E6%98%A0%E5%B0%84"><span class="nav-text">3.4.2 一对多的结果集映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-3-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E7%9A%84%E7%BB%93%E6%9E%9C%E9%9B%86%E6%98%A0%E5%B0%84"><span class="nav-text">3.4.3 多对多的结果集映射</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%EF%BC%88%E5%8F%82%E8%80%83%E7%BD%91%E5%9D%80%EF%BC%89"><span class="nav-text">3.5 使用注解（参考网址）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-%E5%8A%A8%E6%80%81sql"><span class="nav-text">3.6 动态sql</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-2-%E6%A0%87%E7%AD%BE%E4%B8%AD%E5%BC%95%E7%94%A8%E5%8F%82%E6%95%B0%E3%80%81%E5%8F%82%E6%95%B0%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-text">3.6.2 标签中引用参数、参数的属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="nav-text">4 逆向工程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="nav-text">4.1 使用流程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E7%BC%93%E5%AD%98"><span class="nav-text">5 缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="nav-text">5.1 一级缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="nav-text">5.2 二级缓存</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E6%A8%A1%E6%8B%9Fmybatis"><span class="nav-text">6 模拟mybatis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%A5%E5%85%85"><span class="nav-text">补充</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#web%EF%BC%9A%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-text">web：三层架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mvc%EF%BC%9AModel-View-Controller"><span class="nav-text">mvc：Model View Controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#orm%EF%BC%9A%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84"><span class="nav-text">orm：对象关系映射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="nav-text">数据库设计三大范式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F1NF%EF%BC%9A%E6%89%80%E6%9C%89%E5%88%97%E4%BF%9D%E8%AF%81%E5%88%97%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="nav-text">第一范式1NF：所有列保证列的原子性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F2NF%EF%BC%9A%E6%B6%88%E9%99%A4%E4%BC%A0%E9%80%92%E4%BE%9D%E8%B5%96"><span class="nav-text">第二范式2NF：消除传递依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F3NF%EF%BC%9A%E6%B6%88%E9%99%A4%E9%83%A8%E5%88%86%E4%BE%9D%E8%B5%96"><span class="nav-text">第三范式3NF：消除部分依赖</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lombok"><span class="nav-text">lombok</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-text">使用步骤</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">方方</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">方方</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
